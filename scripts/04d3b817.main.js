Todo=Backbone.Model.extend({defaults:{task:""},idAttribute:"_id"}),TodoList=Backbone.Collection.extend({model:Todo,url:"http://tiny-pizza-server.herokuapp.com/collections/Amler-ToDos"}),TodoView=Backbone.View.extend({template:_.template($(".task-list-item").text()),editTemplate:_.template($(".task-edit-item").text()),className:"todo-item",events:{"click .edit-button":"showEdit","click .save-button":"saveEdit","click .delete-button":"destroy","click .completed-button":"taskDone"},initialize:function(){this.listenTo(this.model,"change",this.render),$(".container").prepend(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},showEdit:function(){var a=this.editTemplate(this.model.attributes);this.$el.html(a)},saveEdit:function(){var a=this.model.attributes.task,b=this.$el.find(".task-item input").val();b==a?this.render():(this.model.set("task",b),this.model.save())},taskDone:function(){this.$el.find(".task-item").toggleClass("done")},destroy:function(){this.model.destroy(),this.remove()}}),AddTodoView=Backbone.View.extend({initialize:function(){this.listenTo(list,"add",function(a){new TodoView({model:a})})}});var list=new TodoList,makeItHappen=new AddTodoView;list.fetch(),$(document).ready(function(){$(".enter-task").click(function(){var a=$(".todo-list-item").val(),b=list.add({task:a});b.save()(".todo-list-item").val("")})});